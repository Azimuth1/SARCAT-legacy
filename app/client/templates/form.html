<template name="form">
    <!--
  <div class="container">
  <div class="row default-bg">
      <div class="col-md-12">
                <div class="container-fluid pad1y">
            <h4 class="white nav-title "><strong class="text-uppercase">{{record.recordInfo.name}}</strong> <small><span class="white">Prepared By: <strong> <em>{{record.admin.user}} </em></strong></span> | <span class="white">Created: <strong> <em>{{record.created}}</em></strong></span></small>
            </h4>
            <div class="flex-container _btn-group col-md-12 pad00" role="group" aria-label="...">
                {{#each schemas}}
                    <button type="button" data="{{this.field}}" class="formNav flex-item btn primary-bg marXs">{{this.field}} <small>{{this.current}}/{{this.total}} </small></button>
                {{/each}}
            </div>
        </div>
      </div>
  </div>



  <div class="row">
      <div class="col-md-12 pad2">
-->
    <nav class="navbar default-bg rad0 mar1yb">
        <div class="container-fluid pad0">
            <!--
            <h4 class="white nav-title "><strong class="text-uppercase">{{record.recordInfo.name}}</strong> <small><span class="white">Prepared By: <strong> <em>{{record.admin.user}} </em></strong></span> | <span class="white">Created: <strong> <em>{{record.created}}</em></strong></span></small>
            </h4>
-->
            <table class="recordRecordInfoTable table table-bordered mar00">
                <thead>
                    <tr>
                        <th>Incident #</th>
                        <th>Mission #</th>
                        <th>Record Name</th>
                        <th>Incident Type</th>
                        <th>Created By</th>
                        <th>Created Date</th>
                        <th>Incident Date</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody class="_white-bg">
                    <tr class="text-center">
                        <!--
                           <td> {{> quickForm collection='Records' validation="submit" doc=this class="hideSubmit hideLabel" id='zformdId' autosave=true type='update' fields="record.recordInfo.incidentnum"}}</td>

                           <td> {{> quickForm collection='Records' validation="submit" doc=this class="hideSubmit hideLabel" id='zformdId' autosave=true type='update' fields="record.recordInfo.missionnum"}}</td>

                           <td> {{> quickForm collection='Records' validation="submit" doc=this class="hideSubmit hideLabel" id='zformdId' autosave=true type='update' fields="record.recordInfo.name"}}</td>

                           <td> {{> quickForm collection='Records' validation="submit" doc=this class="hideSubmit hideLabel" id='zformdId' autosave=true type='update' fields="record.recordInfo.incidenttype"}}</td>
                           <td>{{admin.user}}</td>
                        <td>{{toDateString created}}</td>


                           <td> {{> quickForm collection='Records' validation="submit" doc=this class="hideSubmit hideLabel" id='zformdId' autosave=true type='update' fields="record.recordInfo.incidentdate"}}</td>

                           <td> {{> quickForm collection='Records' validation="submit" doc=this class="hideSubmit hideLabel" id='zformdId' autosave=true type='update' fields="record.recordInfo.status"}}</td>
-->
                        <td>{{record.recordInfo.incidentnum}}</td>
                        <td>{{record.recordInfo.missionnum}}</td>
                        <td>{{record.recordInfo.name}}</td>
                        <td>{{record.recordInfo.incidenttype}}</td>
                        <td>{{record.admin.user}}</td>
                        <td>{{toDateString record.created}}</td>
                        <td>{{toDateString record.recordInfo.incidentdate}}</td>
                        <td>{{record.recordInfo.status}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </nav>
    <div id="formPage">
        <div class="text-center mar0">
            {{#each schemas}}
            <button type="button" data="{{this.field}}" class="formNav _flex-item btn mar1yb pad00 {{this.klass}}">{{this.field}}
                <br><small>{{this.sum}} </small></button>
            {{/each}}
        </div>
        <div class="pad00">
         
            <div class="col-md-12">





<div id="mapTools" class="panel">

                <div class="mapBtns mapPoints">
                    <div class="col-md-4 pad00">
                        <div class="btn-group-vertical btn-group btn-block" data-toggle="buttons">
                            <a class="btn btn-danger active btn-block" data="_ippCoordinates">
                                            Incident Location / IPP
                                            <span class="fa-stack _pull-right">
                                          <i class="fa fa-times-circle-o fa-2x fa-fw"></i></span> </a>
                            <label class="btn btn-danger btn-block" data="revisedLKP_PLS" style="font-size:10px">
                                <input type="checkbox" autocomplete="off"> &nbsp; Last Known Point/Last Point Seen
                                <span class="fa-stack _pull-right">
                                          <i class="fa fa-male fa-2x fa-fw"></i>
                                        </span>
                            </label>
                        </div>



                    </div>
                    <div class="col-md-4 pad00">



                        <div class="btn-group-vertical btn-vertical btn-block" data-toggle="buttons">
                            <btn type="button" class="btn btn-primary btn-block" data="destinationCoord">
                                <input type="checkbox" autocomplete="off"> &nbsp; Intended Destination
                                <span class="fa-stack _pull-right">
                                          <i class="fa fa-flag-checkered fa-2x fa-fw"></i>
                                        </span>
                            </btn>
                            <btn type="button" class="btn btn-primary  _btn-block" data="intendedRoute">
                                <input type="checkbox" autocomplete="off"> &nbsp; Intended Route
                                <span class="fa-stack">
                                          <i class="fa fa-long-arrow-right fa-2x fa-fw"></i>
                                        </span>
                            </btn>
                        </div>




                    </div>
                    <div class="col-md-4 pad00">


                        <div class="btn-group-vertical btn-group btn-block" data-toggle="buttons">
                            <a class="btn btn-success btn-block" data="findCoord">
                                <input type="checkbox" autocomplete="off"> &nbsp; Find Location
                                <span class="fa-stack">
                                          <i class="fa fa-flag-checkered fa-2x fa-fw"></i>
                                        </span>
                            </a>
                            <a class="btn btn-success btn-block" data="actualRoute">
                                <input type="checkbox" autocomplete="off"> &nbsp; Actual Route
                                <span class="fa-stack">
                                          <i class="fa fa-long-arrow-right fa-2x fa-fw"></i>
                                        </span>
                            </a>
                        </div>



                    </div>
                   
                   <!--<div class="col-md-3 pad00">


                        <div class="btn-group-vertical btn-block" data-toggle="buttons">
                            <a class="btn btn-warning btn-block" data="decisionPointCoord">
                                <input type="checkbox" autocomplete="off"> &nbsp; Decision Point
                                <span class="fa-stack _pull-right">
                                          <i class="fa fa-code-fork fa-2x fa-fw"></i>
                                </span>
                            </a>
                        </div>
                    </div>-->
                </div>


















                <div id='formMap' style="width:100%; height:400px"></div>

























                <div class="row">
                    {{#autoForm collection='Records' doc=record id='formIdMap' class="form-inline hideSubmit _hideHeader" type=formType autosave=true}}
                    <div class="panel panel-default text-center" style="max-width:170px;">
                        <div class="panel-heading">
                            <h3 class="panel-title">Incident Location/IPP</h3>
                        </div>
                        {{> quickForm collection='Records' validation="submit" doc=current class="text-center hideHeader" id='formdId' autosave=true type=formType fields="coords.ippCoordinates.lat,coords.ippCoordinates.lng"}} {{> afQuickField name="incidentOperations.ipptype" options="allowed"}} {{> afQuickField name="incidentOperations.ippclassification" options="allowed"}}
                    </div>
                    <div class="panel panel-default text-center" style="max-width:170px;">
                        <div class="panel-heading">
                            <h3 class="panel-title">Initial Direction of Travel</h3>
                        </div>
                        <div class="panel-body pad00">
                            <p class="small"><em>*Drag arrow towards direction of travel</em></p>
                            {{> afQuickField class="hide hideLabel" name="incidentOperations.initialDirectionofTravel"}}
                            <div class="col-md-6 col-md-offset-3">
                                <img src="/images/compass.png" class="travelDirection ">
                            </div>
                        </div>
                        {{> afQuickField name='incidentOperations.DOTHowdetermined' options="allowed"}}
                    </div>
                    <div class="{{hideCoord 'decisionPointCoord'}} panel panel-default text-center" style="max-width:170px;">
                        <div class="panel-heading">
                            <h3 class="panel-title">Decision Point</h3>
                        </div>
                        {{> quickForm collection='Records' validation="submit" doc=current class="_text-center hideHeader" id='formdId' autosave=true type=formType fields="coords.decisionPointCoord.lat,coords.decisionPointCoord.lng"}} {{> afQuickField name="incidentOperations.typeofDecisionPoint" options="allowed"}} {{> afQuickField name="incidentOperations.decisionPointFactor" options="allowed"}}
                    </div>
                    <div class="{{hideCoord 'revisedLKP_PLS'}} panel panel-default text-center" style="max-width:170px;">
                        <div class="panel-heading">
                            <h3 class="panel-title">Last Known Point/Point Last Seen</h3>
                        </div>
                        {{> quickForm collection='Records' validation="submit" doc=current class="_text-center hideHeader" id='formdId' autosave=true type=formType fields="coords.revisedLKP_PLS.lat,coords.revisedLKP_PLS.lng"}} {{> afQuickField name="incidentOperations.PLS_HowDetermined" options="allowed"}}
                    </div>
                    <div class="{{hideCoord 'destinationCoord'}}">
                        {{> afQuickField name='coords.destinationCoord' }}
                    </div>
                    <div class="hide">
                        {{> afQuickField name='coords.intendedRoute' }} {{> afQuickField name='coords.actualRoute' }}
                    </div>
                    {{/autoForm}}
                </div>
                {{#autoForm collection='Records' doc=record id='_formIdMap' class="form-inline hideSubmit" type=formType autosave=true}}
                <div class="{{hideCoord 'findCoord'}} panel panel-default text-center">
                    <div class="panel-heading">
                        <h3 class="panel-title">Find Location</h3>
                    </div>
                    <div class="panel-body">
                        {{> quickForm collection='Records' validation="submit" doc=current class="text-center" id='formdId' autosave=true type=formType fields="coords.findCoord.lat,coords.findCoord.lng"}} {{> quickForm collection='Records' validation="submit" doc=current class="hideSubmit recolrdForm5 findCoord" id='formdIdfindCoord' autosave=true type=formType fields="incidentOutcome.distanceIPP, incidentOutcome.dispersionAngle, incidentOutcome.findBearing, incidentOutcome.trackOffset,incidentOutcome.elevationChange"}}
                    </div>
                </div>
                {{/autoForm}} 



</div>








<!--END MAP-->




                {{> quickForm collection='Records' validation="submit" doc=current class="recordForm2 _form-inline hideSubmit" id='formdId' autosave=true type=formType fields="recordInfo" buttonContent= "Save" resetOnSuccess='false' }} {{> quickForm collection='Records' validation="submit" doc=current class="recordForm3 _form-inline hideSubmit" id='formdId' autosave=true type=formType fields="incident" buttonContent= "Save" resetOnSuccess='false' }} {{> quickForm collection='Records' validation="submit" doc=current class="recordForm3 _form-inline hideSubmit" id='formdId' autosave=true type=formType fields="weather,incidentOutcome, rescueDetails" buttonContent= "Save" omitFields="incidentOutcome.distanceIPP, incidentOutcome.dispersionAngle, incidentOutcome.findBearing, incidentOutcome.trackOffset,incidentOutcome.elevationChange"}}
                <!--Subject Info-->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Subject Info
                    <div class="subjectTableView btn-group pull-right" data-toggle="buttons">
   <label class="btn btn-primary active">
    <input type="radio" data="Description" name="subjectTableRadio" autocomplete="off"> Description
  </label>

   <label class="btn btn-primary">
    <input type="radio" data="Rescue" name="subjectTableRadio" autocomplete="off"> Rescue
  </label>

   <label class="btn btn-primary">
    <input type="radio" data="Personal" name="subjectTableRadio" autocomplete="off"> Personal 
    <i class="glyphicon glyphicon-lock"></i>
  </label>
</div>
                    </h3>
                    </div>
                    <div class="panel-body afBody pad00" style="overflow-x: scroll;">
                        {{#autoForm id="editSubjectForm" type="update" collection='Records' autosave=true doc=current setArrayItems=true class="pad00 col-md-12 hideLabel hideHeader" }}
                        <table class="mar1yb table table-bordered table-condensed {{subjectTableView 'Description'}}" style="table-layout: fixed;">
                            <thead class='default-bg'>
                                <tr>
                                    {{#each subjectKeysDesc}}
                                    <th data-subjectTable={{this}} class='text-center afTable col-md-1 text-capitalize' style="padding: 5px 0; font-size: .7em;">{{this}}</th>
                                    {{/each}}
                                    <th class='afTable col-md-1' style="font-size: .8em;width:'9.09%'">Remove Subject</th>
                                </tr>
                            </thead>
                            <tbody class='white-bg'>
                                {{#each getSubjectsArrayDesc}}
                                <tr class="_noBorder">
                                    {{#each this.value}}
                                    <td class="pad00 _noBorder">
                                        {{> afQuickField name=this.name options=this.options }}
                                    </td>
                                    {{/each}}
                                    <td class="padsm">
                                        <button data="{{this._key}}" type="button" class="pull-right btn btn-warning btn-sm _glyphicon _glyphicon-remove removeSubject btn-block btn-sm">Remove</button>
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                        <table class="mar1yb table _table-bordered table-condensed {{subjectTableView 'Rescue'}}" style="table-layout: fixed;">
                            <thead class='default-bg'>
                                <tr>
                                    {{#each subjectKeysRescue}}
                                    <th data-subjectTable={{this}} class='text-center afTable col-md-1 text-capitalize' style="padding: 5px 0; font-size: .7em;">{{this}}</th>
                                    {{/each}}
                                </tr>
                            </thead>
                            <tbody class='white-bg'>
                                {{#each getSubjectsArrayRescue}}
                                <tr class="subjectRescueRow" data-index="{{this.index}}">
                                    {{#each this.value}}
                                    <td class="pad00">
                                        {{> afQuickField name=this.name options=this.options }}
                                    </td>
                                    {{/each}}
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                        <table class="mar1yb table _table-bordered table-condensed {{subjectTableView 'Personal'}}" style="table-layout: fixed;">
                            <thead class='default-bg'>
                                <tr>
                                    {{#each subjectKeysPersonal}}
                                    <th data-subjectTable={{this}} class='text-center afTable col-md-1 text-capitalize' style="padding: 5px 0; font-size: .7em;">{{this}}</th>
                                    {{/each}}
                                </tr>
                            </thead>
                            <tbody class='white-bg'>
                                {{#each getSubjectsArrayPersonal}}
                                <tr>
                                    {{#each this.value}}
                                    <td class="pad00">
                                        {{> afQuickField name=this.name options=this.options }}
                                    </td>
                                    {{/each}}
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                        {{/autoForm}}
                        <button type="submit" class="newSubject btn btn-primary mar0">New Subject</button>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Resources Used
                    </h3>
                    </div>
                    <div class="panel-body afBody pad00" style="overflow-x: scroll;">
                        {{#autoForm id="editSubjectForm2" type="update" collection='Records' autosave=true doc=current setArrayItems=true class="pad00 col-md-12 hideLabel hideHeader" }}
                        <table class="mar1yb table table-bordered table-condensed" style="table-layout: fixed;">
                            <thead class='default-bg'>
                                <tr>
                                    {{#each resourceKeys}}
                                    <th class='text-center afTable col-md-1 text-capitalize' style="padding: 5px 0; font-size: .7em;">{{this}}</th>
                                    {{/each}}
                                    <th class='afTable col-md-1' style="font-size: .8em;width:'9.09%'">Remove Resource</th>
                                </tr>
                            </thead>
                            <tbody class='white-bg'>
                                {{#each getResourceArray2}}
                                <tr class="_noBorder">
                                    {{#each this.value}}
                                    <td class="pad00 _noBorder">
                                        {{> afQuickField name=this.name options=this.options }}
                                    </td>
                                    {{/each}}
                                    <td class="padsm">
                                        <button data="{{this._key}}" type="button" class="pull-right btn btn-warning btn-sm _glyphicon _glyphicon-remove removeResource btn-block btn-sm">Remove</button>
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                        {{/autoForm}}
                        <button type="submit" class="newResource btn btn-primary mar0">New Resource</button>
                        <div class="col-md-12">
                            <hr> {{> quickForm collection='Records' validation="submit" doc=current class="_text-center hideSubmit hideHeader recordForm5" id='formdId' autosave=true type=formType fields="resourcesUsed.numTasks,resourcesUsed.totalPersonnel,resourcesUsed.totalManHours,resourcesUsed.distanceTraveled,resourcesUsed.totalCost"}}
                        </div>
                    </div>
                </div>
                {{> quickForm collection='Records' validation="submit" doc=current class="recordForm0 _form-inline hideSubmit" id='formdId' autosave=true type=formType fields="xComments" buttonContent= "Save" resetOnSuccess='false' }}
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Record Files</h3>
                    </div>
                    <div class="panel-body afBody">
                        <div class="list-group">
                            {{#if fileUploads.length}}
                            <label class="control-label">Click File to View:</label>
                            {{/if}} {{#each fileUploads}}
                            <a class="list-group-item fileUpload" data="{{this}}">{{this}}</a> {{/each}}
                        </div>
                        <label class="control-label">Upload Files</label>
                        {{> upload_bootstrap formData=record multiple=true}} </div>
                </div>
                <div class="col-md-12 mar1y">
                    <a href="{{pathFor 'records'}}" class="btn btn-primary btn-lg btn-block">
                        <i class="glyphicon glyphicon-check"></i> Done
                    </a>
                </div>
            </div>
        </div>
    </div>
</template>
