sarcat.ui=function(){};var sarcat=function(a){var b=d3.select("body"),c={},d=c.config={};return c.auth=function(a,b){sarcat.auth(a,b,function(a){console.log("user authenticated"),d.user=a,c.dashboardPage(a)})},c.formPage=function(){return b.selectAll("div").remove(),sarcat.formPage(b,a.layout)},c.dashboardPage=function(){return b.selectAll("div").remove(),sarcat.dashboardPage(b,c)},c.loginPage=function(){return b.selectAll("div").remove(),sarcat.loginPage(b,c)},c.formPage(),c};sarcat.auth=function(a,b,c){d3.json("../../data/login.json",function(a){c(a.login)})},sarcat.loginPage=function(a,b){var c=a.append("div").attr("class","login"),d=c.append("div").attr("class","intro-text");d.append("div").attr("class","intro-lead-in").text("Missing persons database entry."),d.append("div").attr("class","intro-heading").text("SARCAT");var e=c.append("div").attr("class","wrapper").append("form").attr("class","form-signin");e.append("h2").attr("class","form-signin-heading").text("Login");var f=e.append("input").attr("autofocus","").attr("class","form-control").attr("name","username").attr("value","SARCATUser@sarcat.org").attr("type","text").attr("required",""),g=e.append("input").attr("autofocus","").attr("class","form-control").attr("name","username").attr("value","aaaaaa").attr("type","password").attr("required",""),h=e.append("label").attr("class","checkbox");h.append("input").attr("type","checkbox"),h.append("p").text("Remember Me"),e.append("button").attr("class","btn btn-lg btn-primary btn-block demoLogin").attr("type","button").text("Login").on("click",function(){b.auth(f.node().value,g.node().value)}),e.append("button").attr("class","btn btn-lg btn-default btn-block demoLogin").attr("type","button").text("Not Registered?")},sarcat.dashboardPage=function(a,b){var c=a.append("div").attr("class","login"),d=c.append("div").attr("class","intro-text");d.append("div").attr("class","intro-lead-in").text("Missing persons database entry."),d.append("div").attr("class","intro-heading").text("SARCAT");var e=c.append("div").attr("class","form-welcome");e.append("h1").text("Welcome User!"),e.append("hr"),e.append("button").attr("type","button").attr("class","btn btn-primary btn-lg btn-block").text("Create New Record").on("click",function(){b.formPage()}),e.append("button").attr("type","button").attr("class","btn btn-default btn-lg btn-block").text("Edit Existing Record")},sarcat.formPage=function(a,b){var c=function(a,b,d){var e=d3.select(b),f=a.type;f="select"===f&&a.vals.length<6?"radio":f;var g=a.value;if(d&&(e=e.append("div").attr("class","col-xs-6"),e.append("h4").attr("class","control-label").style("text-align","left").text(function(){return a.name})),a.data)return void a.data.forEach(function(a){c(a,b,!0)});if("select"===f){var h=e.append("select").attr("class","form-control");h.selectAll("option").data(a.vals).enter().append("option").attr("value",function(a){return a}).text(function(a){return a});var i=a.vals.indexOf(g);h.property("selectedIndex",i)}if("text"===f&&e.append("input").attr("type","text").attr("class","form-control").attr("placeholder",function(){return a.name}),"number"===f&&e.append("input").attr("type","number").attr("class","form-control").attr("id",function(b){return a.name+"-"+b.name.replace(/ /g,"_").replace(/\//g,"")}).attr("value",g),"radio"===f){e=e.append("div").classed("btn-group",!0).attr("data-toggle","buttons");var j=e.selectAll("radio").data(a.vals),k=j.enter().append("label").attr("class",function(a){var b=g===a?"active":"";return"btn btn-primary "+b});k.text(function(a){return a}),k.append("input").attr("type","radio").attr("name",function(){return a.name})}if("date"===f){var l=(new Date).toISOString().substr(0,10);e.append("input").attr("type","date").attr("class","form-control").attr("value",l)}"textarea"===f&&e.append("textarea").attr("class","form-control").attr("rows","3").attr("placeholder",function(){return a.placeholder})},d=b,e=a.append("div").attr("id","form-container").attr("class","container");e.append("div").attr("class","page-header"),e.append("h3").html("SARCAT <small>Missing persons database entry.</small>");var f=e.append("div").attr("class","row pad0");f.append("div").attr("class","col-md-12 paxd5").append("div").attr("class","progress").append("div").attr("class","progress-bar progress-bar-info progress-bar-striped").text("0%"),f.append("div").attr("class","col-md-12 pad5y").append("div").attr("class","step");var g=e.append("div").attr("class","row formContainer").append("div").attr("class",function(){return"col-md-12 formFill"}).selectAll("form").data(d),h=g.enter().append("form").attr("class",function(a,b){var c=0===b?"step"+a.step:"_hidden step"+a.step;return"col-md-12 form-horizontal "+c});h.append("legend").text(function(a){return a.name}),h.select(function(a){var b=a.data||[],d=d3.select(this).selectAll("div").data(b).enter().append("div").attr("class","form-group pad5").append("div").attr("class","col-md-12 pad5 form-group-style");d.append("label").attr("class","control-label col-xs-2").text(function(a){return a.name}),d.append("div").attr("class","col-xs-10").select(function(a){c(a,this)})});var i=d3.select(".step").selectAll("p").data(d),j=i.enter().append("div").attr("class",function(a,b){return 0===b?"activestep steps btnStep"+b:"steps btnStep"+b}).on("click",function(a,b){g.classed("hidden",!0),g.each(function(b){b.step===a.step&&d3.select(this).classed("hidden",!1)});var c=d3.select(this),d=10*b;d3.select(".progress-bar").style("width",d+"%").attr("aria-valuenow",d).text(d+"%"),j.classed("activestep",!1),c.classed("activestep",!0)});j.append("span").attr("class","glyphicon glyphicon-ok btn-md"),j.append("h6").text(function(a){return a.name}),sarcat.map(d3.select(".step2"),function(){$(".btnStep0").click()})},sarcat.map=function(a,b){a.insert("iframe",":first-child").attr("src","tmp/mapview.html").attr("id","map").style({height:"500px",width:"100%"}),b&&b()},function(){d3.json("../data/config.json",function(a){var b=sarcat({layout:a.config});console.log(b)})}();