{"version":3,"sources":["url/url_common.js","url/url_server.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,S;;AAEA,kC;AACA,kF;AACA,E;;;AAGA,sC;AACA,e;AACA,uC;AACA,mB;AACA,oB;AACA,0D;AACA,K;AACA,2C;AACA,E;;;AAGA,sE;AACA,uC;AACA,sD;;AAEA,oC;AACA,8B;;AAEA,mB;AACA,wB;AACA,6C;AACA,sB;AACA,mB;AACA,kB;AACA,G;;AAEA,8B;AACA,qB;AACA,uB;;AAEA,a;AACA,E;;;;;;;;;;;;;;;;;;;ACtCA,kC;;AAEA,mD;AACA,sC;AACA,kB;AACA,oE;AACA,qC;AACA,E","file":"/packages/url.js","sourcesContent":["URL = {};\n\nvar encodeString = function(str) {\n  return encodeURIComponent(str).replace(/[!'()]/g, escape).replace(/\\*/g, \"%2A\");\n};\n\n\nURL._encodeParams = function(params) {\n  var buf = [];\n  _.each(params, function(value, key) {\n    if (buf.length)\n      buf.push('&');\n    buf.push(encodeString(key), '=', encodeString(value));\n  });\n  return buf.join('').replace(/%20/g, '+');\n};\n\n\nbuildUrl = function(before_qmark, from_qmark, opt_query, opt_params) {\n  var url_without_query = before_qmark;\n  var query = from_qmark ? from_qmark.slice(1) : null;\n\n  if (typeof opt_query === \"string\")\n    query = String(opt_query);\n\n  if (opt_params) {\n    query = query || \"\";\n    var prms = URL._encodeParams(opt_params);\n    if (query && prms)\n      query += '&';\n    query += prms;\n  }\n\n  var url = url_without_query;\n  if (query !== null)\n    url += (\"?\"+query);\n\n  return url;\n};\n","var url_util = Npm.require('url');\n\nURL._constructUrl = function (url, query, params) {\n  var url_parts = url_util.parse(url);\n  return buildUrl(\n    url_parts.protocol + \"//\" + url_parts.host + url_parts.pathname,\n    url_parts.search, query, params);\n};\n"]}